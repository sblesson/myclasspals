(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[15],{591:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(20),o=n(336),l=(n(602),n(34));t.a=Object(c.b)((function(e){return{auth:e.auth}}),{searchUser:l.g})((function(e){var t=e.searchUser,n=e.auth,a=e.endUsersSelect,c=o.a.Option,l=n&&n.searchUserResult&&n.searchUserResult.length>0&&n.searchUserResult.map((function(e,t){return r.a.createElement(c,{key:t,value:e.email},r.a.createElement("span",{style:{fontWeigth:"bolder"}}," ",e.email))}));return r.a.createElement(o.a,{name:a,placeholder:"Select members",mode:"multiple",onSearch:function(e){e&&setTimeout((function(){t(e)}),1e3*Math.random())},onChange:function(e,t){n&&n.searchUserResult&&n.searchUserResult.length>0&&(n.selectedUser=n.searchUserResult[t.key])},showArrow:!0},l)}))},594:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return m}));var a=n(5),r=n.n(a),c=n(13),o=n(8),l=n.n(o),s=n(6),u=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a){var c,o,u;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=l.a.CancelToken.source(),o={headers:{"Content-Type":"application/json"}},n.prev=2,n.next=5,l.a.post("/event",e,o,{cancelToken:c.token});case 5:u=n.sent,a({type:"ADD_EVENT",payload:u.data}),a(Object(s.c)("Event Created","success")),t(u),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(2),console.log(n.t0),a(Object(s.c)(n.t0&&n.t0.response&&n.t0.response.data&&null!==n.t0.response.data.message?n.t0.response.data.message:"Unable to create the event, please try again later","error"));case 15:t(c);case 16:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(e){return n.apply(this,arguments)}}()},i=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.a.CancelToken.source(),t.prev=1,t.next=4,l.a.get("/user/events",{cancelToken:a.token});case 4:c=t.sent,n({type:"GET_EVENTS",payload:c.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Object(s.a)(t.t0,"GET_EVENTS_ERROR");case 11:e(a);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},m=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l.a.delete("/event/".concat(e));case 3:n.sent,a({type:"DELETE_EVENT",payload:e}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),Object(s.a)(n.t0,"DELETE_EVENT_ERROR");case 10:t();case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}},603:function(e,t,n){},608:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(22),o=n(575),l=n(189),s=n(239),u=n(188),i=n(591),m=(n(603),function(e){var t=e.handleSubmit,n=e.values,a=e.submitCount;return r.a.createElement(o.a,Object.assign({className:"form-container"},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{layout:"vertical",initialValues:{size:"small"},onSubmit:t}),r.a.createElement(c.b,{component:l.b,name:"title",type:"text",label:"What is the event name?",placeholder:"Name of the event",defaultValue:n.eventTitle,validate:u.a,submitCount:a,hasFeedback:!0}),r.a.createElement(c.b,{component:l.d,name:"location",type:"text",label:"Where is the event held?",placeholder:"Type address or add virtual link",defaultValue:n.eventLocation,validate:u.a,submitCount:a,hasFeedback:!0}),r.a.createElement(c.b,{component:l.d,name:"desc",type:"text",label:"What is the event about?",placeholder:"Type your short description about the event",defaultValue:n.eventDescription,submitCount:a,hasFeedback:!0}),n.isGenericEvent&&r.a.createElement(c.b,{component:l.c,name:"eventGroup",label:"Which groups can view the event?",defaultValue:n.eventFrequency,selectOptions:n.userGroups,submitCount:a}),n.isGenericEvent&&r.a.createElement(s.a,{name:"usersSelect",label:"Who else can view the event other than group?",required:!1},r.a.createElement(i.a,{endUsersSelect:"usersSelect"})),r.a.createElement(c.b,{component:l.a,name:"start",label:"Start Date",defaultValue:n.eventStartDate,format:l.f,validate:u.b,submitCount:a,hasFeedback:!0}),r.a.createElement(c.b,{component:l.e,name:"startTime",label:"Start Time",defaultValue:n.eventStartTime,format:l.g,hourStep:1,minuteStep:5,submitCount:a,hasFeedback:!0,use12Hours:!0}),r.a.createElement(c.b,{component:l.a,name:"end",label:"End Date",defaultValue:n.eventEndDate,format:l.f,validate:u.b,submitCount:a,hasFeedback:!0}),r.a.createElement(c.b,{component:l.e,name:"endTime",label:"End Time",defaultValue:n.eventEndTime,format:l.g,hourStep:1,minuteStep:5,submitCount:a,hasFeedback:!0,use12Hours:!0}),r.a.createElement("div",{className:"submit-container"},r.a.createElement("button",{className:"ant-btn ant-btn-primary btn-primary",type:"submit"},"Submit")))}),p=n(65),d=n.n(p),v=n(19),b=n(20),f=n(594);t.a=Object(b.b)((function(e){return{auth:e.auth,group:e.group}}),{addEvent:f.a})(Object(v.h)((function(e){var t=e.group,n=e.auth,a=e.hideModal,o=e.addEvent,l=e.isGenericEvent,s={eventTitle:"",eventLocation:"",eventDescription:"",eventStartDate:d()(Date.now()),eventEndDate:d()(Date.now()),eventStartTime:d()(Date.now()),eventEndTime:d()(Date.now()),eventFrequency:"Does not repeat",userGroups:function(){var e=t.userGroup.map((function(e){return e.groupName}));return console.log(e),e}(),isGenericEvent:l,eventFrequencySelectOptions:["Does not repeat","Daily","Weekly","Monthly"],eventGroup:"-Select-"},u=function(e,t){var n,a,r=d()(e).format("L").split("/"),c=parseInt(r[0])-1,o=parseInt(r[1]),l=parseInt(r[2]),s=t.format("HH,mm").split(",");return s&&s.length>0&&(n=parseInt(s[0]),a=parseInt(s[1])),new Date(l,c,o,n,a)};return r.a.createElement(c.c,{initialValues:s,onSubmit:function(e){console.log(e);var r=e.title,c=e.desc,s=e.location,i=e.start,m=e.end,p=e.startTime,d=e.endTime,v=(e.groupId,e.eventStartDate),b=e.eventEndDate,f=e.eventStartTime,h=e.eventEndTime,E=e.eventGroup,g=(e.userGroups,e.usersSelect);m=m||b,p=p||f,d=d||h;var y={title:r,desc:c,location:s};(i=i||v)&&(y.start=u(i,p)),m&&(y.end=u(m,d)),l?"-Select-"!==E?y.groupId=function(e){var n=t.userGroup.filter((function(t){return e===t.groupName}));return n&&n.length>0?n[0].id:null}(E):g&&g.length>0?y.eventInvities=g:y.eventInvities=[n.user.email]:y.groupId=t.currentGroup.id,o(JSON.stringify(y),(function(){a()}))},render:m})})))},701:function(e,t,n){"use strict";n.r(t);var a=n(245),r=n(21),c=n(0),o=n.n(c),l=n(681),s=n(65),u=n.n(s),i=n(20),m=n(594),p=n(570),d=n(608),v=function(e){return{group:e.group}},b=Object(i.b)(v,{mapDispatchToProps:v})((function(e){var t,n=e.group,l=Object(c.useState)(!1),s=Object(r.a)(l,2),u=s[0],i=s[1],m=function(){i(!1)};return o.a.createElement(c.Fragment,null,o.a.createElement("div",{className:"new-event-form",onClick:function(){i(!0)}},o.a.createElement("div",{style:{display:"flex",flex:"1",justifyContent:"flex-end",margin:"1rem 0",cursor:"pointer"}},o.a.createElement("button",{className:"ant-btn ant-btn-primary btn-primary float-right",type:"submit"},o.a.createElement("span",null,o.a.createElement("i",{className:"far fa-calendar-alt"}),"\xa0 Add Event")," "))),o.a.createElement(p.a,(t={centered:!0,title:"Create event",visible:u,okText:"Create",onOk:m,onCancel:function(){i(!u)},destroyOnClose:!0,cancelButtonProps:{style:{display:"none"}}},Object(a.a)(t,"destroyOnClose",!0),Object(a.a)(t,"footer",null),t),o.a.createElement(d.a,{hideModal:m,group:n,isGenericEvent:!0})))})),f=n(55),h=n(680),E=n.n(h);u.a.locale("en");var g=Object(l.c)(u.a);t.default=Object(i.b)((function(e,t){return{auth:e.auth,group:e.group,event:e.event}}),{getEvents:m.c,deleteEvent:m.b})((function(e){var t,n=e.getEvents,s=e.deleteEvent,i=e.event,m=Object(c.useState)(!1),d=Object(r.a)(m,2),v=(d[0],d[1]),h=Object(c.useState)({}),y=Object(r.a)(h,2),O=y[0],k=y[1],S=Object(c.useState)({}),T=Object(r.a)(S,2),j=T[0],w=T[1],D=Object(c.useState)(""),C=Object(r.a)(D,2),x=C[0],N=(C[1],o.a.useState(!1)),V=Object(r.a)(N,2),G=V[0],R=V[1],L=o.a.useState(!1),U=Object(r.a)(L,2),F=U[0],I=U[1],W=function(){I(!0),s(O.eventId,(function(){R(!1),I(!1),window.location.pathname="/events"}))},_=function(){console.log("Clicked cancel button"),R(!1)},A=Object(c.useRef)(!0);Object(c.useEffect)((function(){return A.current&&n((function(e){e.cancel()})),function(){}}),[]),Object(c.useEffect)((function(){return function(){A.current=!1}}),[]);return o.a.createElement("div",{style:{height:"80vh",width:"95vw",margin:"2rem auto"}},o.a.createElement(b,null),o.a.createElement(l.a,{startAccessor:function(e){return new Date(e.start)},endAccessor:function(e){return new Date(e.end)},localizer:g,defaultate:new Date(Date.now()),defaultView:x||l.b.WEEK,defaultDate:new Date,events:i.events,drilldownView:"agenda",views:["month","week","agenda"],popup:!0,onView:function(e){console.log(e)},onSelectEvent:function(e){return function(e){v(!0),console.log(e);var t={description:e.desc,endTime:e.end,location:e.location,startTime:e.start,title:e.title};console.log(t),k(e),w(t),R(!0)}(e)}}),o.a.createElement(p.a,(t={centered:!0,title:O.title,visible:G,closable:!1,okText:"Delete",onOk:_,onCancel:W,destroyOnClose:!0,cancelButtonProps:{style:{display:"none"}},okButtonProps:{loading:F}},Object(a.a)(t,"destroyOnClose",!0),Object(a.a)(t,"footer",[o.a.createElement(f.a,{key:"delete",danger:!0,style:{color:"#cc0000"},onClick:W},"Delete"),o.a.createElement(f.a,{key:"cancel",onClick:_},"Cancel")]),t),o.a.createElement(E.a,{event:j}),u()(O.start).format("LLL"),O.end&&O.end!==O.start?" - "+u()(O.end).format("LLL"):"",o.a.createElement("br",null),O.groupName&&"Group Name: "+O.groupName,o.a.createElement("br",null),O.desc&&"Description: "+O.desc,o.a.createElement("br",null),O.location&&"Location: "+O.location))}))}}]);
//# sourceMappingURL=15.a2c706ca.chunk.js.map